import React from "react";
import { MySelect } from "components";
import DoubleChart from "../../../../../components/statisticsCard/components/doubleChart";
import StatisticsCard from "../../../../../components/statisticsCard";
import { useForm } from "react-hook-form";
import { useLeadStatistics } from "hooks";
import moment from "moment";
import { useRouter } from "next/router";
import _ from "lodash";
import { DATE_FORMAT_YYYY_MM_DD } from "constants/dates";
import { CustomTooltip, Wrapper } from "./style";
import dayjs from "dayjs";

const NewLeadsToRegistered = () => {
  const router = useRouter();

  const { control, watch } = useForm();

  const { isLoading, data } = useLeadStatistics({
    query_params: {
      type: "leadProgress",
      from_date: router.query?.from_date
        ? router.query?.from_date
        : dayjs().startOf("month").format(DATE_FORMAT_YYYY_MM_DD),
      to_date: router.query?.to_date
        ? router.query?.to_date
        : dayjs().format(DATE_FORMAT_YYYY_MM_DD),
      ...router.query,
    },
  });

  const getSources = () => {
    return _.uniqBy(data?.leadProgress, (e) => e.source).map((e) => {
      return {
        label: e.source,
        value: e.source,
      };
    });
  };

  const getAllData = (filter?: string | number) => {
    const from_date = router.query.from_date
      ? moment(router.query.from_date, DATE_FORMAT_YYYY_MM_DD)
      : moment().startOf("month");
    const date = router.query.to_date
      ? moment(router.query.to_date, DATE_FORMAT_YYYY_MM_DD)
      : moment();
    const res: any[] = [];
    const newData = filter
      ? (data?.leadProgress || [])?.filter((e) => {
          return e.source == filter;
        })
      : data?.leadProgress || [];

    function getDatesArray(startDate: moment.Moment, endDate: moment.Moment) {
      let currentDate = startDate.clone();

      while (currentDate.isSameOrBefore(endDate)) {
        const day = currentDate.format("DD MMM");
        const date = currentDate.format(DATE_FORMAT_YYYY_MM_DD);
        const find = newData?.filter((e) => {
          return e.date == `${date}`;
        });

        const overall = find?.reduce(
          (acc, cer) => acc + Number(cer?.registered),
          0,
        );

        const overallCount = find?.reduce(
          (acc, cer) => acc + Number(cer?.count),
          0,
        );

        find
          ? res.push({
              date: day,
              count: overallCount,
              freshman: +overall,
            })
          : res.push({
              date: day,
              count: 0,
              freshman: 0,
            });
        currentDate.add(1, "day");
      }
    }

    getDatesArray(from_date, date);
    return res;
  };

  return (
    <Wrapper>
      <StatisticsCard
        isLoading={isLoading}
        selectNode={
          <MySelect
            style={{ width: "160px", marginLeft: "auto" }}
            name="source"
            control={control}
            placeholder="All sources"
            options={getSources()}
          />
        }
        title={
          <svg
            width="177"
            height="13"
            viewBox="0 0 177 13"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8.05824 1.27273V10H6.46449L2.66761 4.5071H2.60369V10H0.758523V1.27273H2.37784L6.14489 6.76136H6.22159V1.27273H8.05824ZM12.4116 10.1278C11.7383 10.1278 11.1588 9.99148 10.673 9.71875C10.19 9.44318 9.81786 9.05398 9.55649 8.55114C9.29513 8.04545 9.16445 7.44744 9.16445 6.7571C9.16445 6.08381 9.29513 5.4929 9.55649 4.98438C9.81786 4.47585 10.1858 4.07955 10.6602 3.79545C11.1375 3.51136 11.6971 3.36932 12.3392 3.36932C12.771 3.36932 13.173 3.43892 13.5451 3.57812C13.9201 3.71449 14.2468 3.92045 14.5252 4.19602C14.8065 4.47159 15.0252 4.81818 15.1815 5.2358C15.3377 5.65057 15.4159 6.13636 15.4159 6.69318V7.19176H9.88888V6.06676H13.7071C13.7071 5.8054 13.6502 5.57386 13.5366 5.37216C13.423 5.17045 13.2653 5.01278 13.0636 4.89915C12.8647 4.78267 12.6332 4.72443 12.369 4.72443C12.0934 4.72443 11.8491 4.78835 11.636 4.91619C11.4258 5.04119 11.261 5.21023 11.1417 5.4233C11.0224 5.63352 10.9613 5.8679 10.9585 6.12642V7.19602C10.9585 7.51989 11.0181 7.79972 11.1375 8.03551C11.2596 8.27131 11.4315 8.45312 11.6531 8.58097C11.8747 8.70881 12.1375 8.77273 12.4414 8.77273C12.6431 8.77273 12.8278 8.74432 12.9954 8.6875C13.163 8.63068 13.3065 8.54545 13.4258 8.43182C13.5451 8.31818 13.636 8.17898 13.6985 8.0142L15.3775 8.125C15.2923 8.52841 15.1176 8.88068 14.8534 9.18182C14.592 9.48011 14.2539 9.71307 13.8392 9.88068C13.4272 10.0455 12.9514 10.1278 12.4116 10.1278ZM17.7248 10L15.9436 3.45455H17.7802L18.7944 7.85227H18.8541L19.9109 3.45455H21.7135L22.7873 7.8267H22.8427L23.8399 3.45455H25.6723L23.8953 10H21.9734L20.8484 5.88352H20.7675L19.6425 10H17.7248ZM30.9934 1.27273V10H29.178V1.27273H30.9934ZM35.3105 10.1278C34.6372 10.1278 34.0577 9.99148 33.5719 9.71875C33.0889 9.44318 32.7168 9.05398 32.4554 8.55114C32.194 8.04545 32.0634 7.44744 32.0634 6.7571C32.0634 6.08381 32.194 5.4929 32.4554 4.98438C32.7168 4.47585 33.0847 4.07955 33.5591 3.79545C34.0364 3.51136 34.596 3.36932 35.2381 3.36932C35.6699 3.36932 36.0719 3.43892 36.444 3.57812C36.819 3.71449 37.1457 3.92045 37.4241 4.19602C37.7054 4.47159 37.9241 4.81818 38.0804 5.2358C38.2366 5.65057 38.3148 6.13636 38.3148 6.69318V7.19176H32.7878V6.06676H36.606C36.606 5.8054 36.5491 5.57386 36.4355 5.37216C36.3219 5.17045 36.1642 5.01278 35.9625 4.89915C35.7636 4.78267 35.5321 4.72443 35.2679 4.72443C34.9923 4.72443 34.748 4.78835 34.5349 4.91619C34.3247 5.04119 34.1599 5.21023 34.0406 5.4233C33.9213 5.63352 33.8602 5.8679 33.8574 6.12642V7.19602C33.8574 7.51989 33.917 7.79972 34.0364 8.03551C34.1585 8.27131 34.3304 8.45312 34.552 8.58097C34.7736 8.70881 35.0364 8.77273 35.3403 8.77273C35.542 8.77273 35.7267 8.74432 35.8943 8.6875C36.0619 8.63068 36.2054 8.54545 36.3247 8.43182C36.444 8.31818 36.5349 8.17898 36.5974 8.0142L38.2764 8.125C38.1912 8.52841 38.0165 8.88068 37.7523 9.18182C37.4909 9.48011 37.1528 9.71307 36.7381 9.88068C36.3261 10.0455 35.8503 10.1278 35.3105 10.1278ZM41.2459 10.1236C40.8283 10.1236 40.4561 10.0511 40.1294 9.90625C39.8027 9.75852 39.5442 9.54119 39.3539 9.25426C39.1664 8.96449 39.0726 8.60369 39.0726 8.17188C39.0726 7.80824 39.1394 7.50284 39.2729 7.25568C39.4064 7.00852 39.5882 6.80966 39.8184 6.65909C40.0485 6.50852 40.3098 6.39489 40.6024 6.31818C40.8979 6.24148 41.2076 6.1875 41.5314 6.15625C41.9121 6.11648 42.2189 6.07955 42.4519 6.04545C42.6848 6.00852 42.8539 5.95455 42.959 5.88352C43.0641 5.8125 43.1166 5.70739 43.1166 5.56818V5.54261C43.1166 5.27273 43.0314 5.06392 42.861 4.91619C42.6934 4.76847 42.4547 4.6946 42.1451 4.6946C41.8184 4.6946 41.5584 4.76705 41.3652 4.91193C41.172 5.05398 41.0442 5.23295 40.9817 5.44886L39.3027 5.3125C39.388 4.91477 39.5556 4.57102 39.8056 4.28125C40.0556 3.98864 40.378 3.7642 40.7729 3.60795C41.1706 3.44886 41.6309 3.36932 42.1536 3.36932C42.5172 3.36932 42.8652 3.41193 43.1976 3.49716C43.5328 3.58239 43.8297 3.71449 44.0882 3.89347C44.3496 4.07244 44.5556 4.30256 44.7061 4.58381C44.8567 4.86222 44.932 5.19602 44.932 5.58523V10H43.2104V9.09233H43.1593C43.0541 9.29688 42.9135 9.47727 42.7374 9.63352C42.5612 9.78693 42.3496 9.90767 42.1024 9.99574C41.8553 10.081 41.5698 10.1236 41.2459 10.1236ZM41.7658 8.87074C42.0328 8.87074 42.2686 8.81818 42.4732 8.71307C42.6777 8.60511 42.8382 8.46023 42.9547 8.27841C43.0712 8.09659 43.1294 7.89062 43.1294 7.66051V6.96591C43.0726 7.00284 42.9945 7.03693 42.8951 7.06818C42.7985 7.09659 42.6891 7.12358 42.5669 7.14915C42.4448 7.17187 42.3226 7.19318 42.2005 7.21307C42.0783 7.23011 41.9675 7.24574 41.8681 7.25994C41.655 7.29119 41.4689 7.34091 41.3098 7.40909C41.1507 7.47727 41.0272 7.5696 40.9391 7.68608C40.851 7.79972 40.807 7.94176 40.807 8.11222C40.807 8.35938 40.8965 8.5483 41.0755 8.67898C41.2573 8.80682 41.4874 8.87074 41.7658 8.87074ZM48.6323 10.1065C48.1351 10.1065 47.6849 9.97869 47.2814 9.72301C46.8809 9.46449 46.5627 9.08523 46.3269 8.58523C46.0939 8.08239 45.9775 7.46591 45.9775 6.7358C45.9775 5.9858 46.0982 5.36222 46.3397 4.86506C46.5812 4.36506 46.9022 3.99148 47.3028 3.74432C47.7062 3.49432 48.1479 3.36932 48.628 3.36932C48.9945 3.36932 49.2999 3.43182 49.5442 3.55682C49.7914 3.67898 49.9903 3.83239 50.1408 4.01705C50.2942 4.19886 50.4107 4.37784 50.4903 4.55398H50.5457V1.27273H52.3567V10H50.567V8.9517H50.4903C50.405 9.13352 50.2843 9.31392 50.128 9.4929C49.9746 9.66903 49.7743 9.81534 49.5272 9.93182C49.2829 10.0483 48.9846 10.1065 48.6323 10.1065ZM49.2076 8.66193C49.5002 8.66193 49.7474 8.58239 49.9491 8.4233C50.1536 8.26136 50.3099 8.03551 50.4178 7.74574C50.5286 7.45597 50.584 7.11648 50.584 6.72727C50.584 6.33807 50.53 6 50.4221 5.71307C50.3141 5.42614 50.1579 5.20455 49.9533 5.0483C49.7488 4.89205 49.5002 4.81392 49.2076 4.81392C48.9093 4.81392 48.6579 4.89489 48.4533 5.05682C48.2488 5.21875 48.0939 5.44318 47.9888 5.73011C47.8837 6.01705 47.8312 6.34943 47.8312 6.72727C47.8312 7.10795 47.8837 7.4446 47.9888 7.73722C48.0968 8.02699 48.2516 8.25426 48.4533 8.41903C48.6579 8.58097 48.9093 8.66193 49.2076 8.66193ZM59.1753 5.32102L57.5134 5.4233C57.485 5.28125 57.4239 5.15341 57.3301 5.03977C57.2364 4.9233 57.1128 4.83097 56.9594 4.76278C56.8088 4.69176 56.6284 4.65625 56.4182 4.65625C56.1369 4.65625 55.8997 4.71591 55.7065 4.83523C55.5134 4.9517 55.4168 5.10795 55.4168 5.30398C55.4168 5.46023 55.4793 5.59233 55.6043 5.70028C55.7293 5.80824 55.9438 5.89489 56.2477 5.96023L57.4324 6.19886C58.0688 6.32955 58.5432 6.53977 58.8557 6.82955C59.1682 7.11932 59.3244 7.5 59.3244 7.97159C59.3244 8.40057 59.198 8.77699 58.9452 9.10085C58.6952 9.42472 58.3514 9.67756 57.9139 9.85938C57.4793 10.0384 56.9779 10.1278 56.4097 10.1278C55.5432 10.1278 54.8529 9.94744 54.3387 9.58665C53.8273 9.22301 53.5276 8.72869 53.4395 8.10369L55.225 8.00994C55.279 8.27415 55.4097 8.47585 55.6171 8.61506C55.8244 8.75142 56.0901 8.8196 56.4139 8.8196C56.7321 8.8196 56.9878 8.75852 57.181 8.63636C57.377 8.51136 57.4764 8.35085 57.4793 8.15483C57.4764 7.99006 57.4068 7.85511 57.2705 7.75C57.1341 7.64205 56.9239 7.55966 56.6398 7.50284L55.5063 7.27699C54.8671 7.14915 54.3912 6.92756 54.0787 6.61222C53.769 6.29687 53.6142 5.89489 53.6142 5.40625C53.6142 4.9858 53.7279 4.62358 53.9551 4.3196C54.1852 4.01562 54.5077 3.78125 54.9225 3.61648C55.3401 3.4517 55.8287 3.36932 56.3884 3.36932C57.2151 3.36932 57.8656 3.54403 58.3401 3.89347C58.8173 4.2429 59.0958 4.71875 59.1753 5.32102ZM72.8913 9.93182L71.9026 8.9517L75.218 5.63636L71.9026 2.32528L72.8913 1.34091L77.1867 5.63636L72.8913 9.93182ZM63.7805 7.47727V6.08807H75.8103L74.4126 7.47727H63.7805ZM63.7805 5.18466V3.79545H74.4126L75.8103 5.18466H63.7805ZM81.6662 10V1.27273H85.1094C85.7684 1.27273 86.3309 1.39062 86.7969 1.62642C87.2656 1.85937 87.6221 2.19034 87.8665 2.61932C88.1136 3.04545 88.2372 3.54687 88.2372 4.12358C88.2372 4.70312 88.1122 5.2017 87.8622 5.61932C87.6122 6.03409 87.25 6.35227 86.7756 6.57386C86.304 6.79545 85.7329 6.90625 85.0625 6.90625H82.7571V5.4233H84.7642C85.1165 5.4233 85.4091 5.375 85.642 5.27841C85.875 5.18182 86.0483 5.03693 86.1619 4.84375C86.2784 4.65057 86.3366 4.41051 86.3366 4.12358C86.3366 3.83381 86.2784 3.58949 86.1619 3.39062C86.0483 3.19176 85.8736 3.04119 85.6378 2.93892C85.4048 2.83381 85.1108 2.78125 84.7557 2.78125H83.5113V10H81.6662ZM86.3792 6.02841L88.5483 10H86.5113L84.3892 6.02841H86.3792ZM92.2646 10.1278C91.5913 10.1278 91.0117 9.99148 90.5259 9.71875C90.043 9.44318 89.6708 9.05398 89.4095 8.55114C89.1481 8.04545 89.0174 7.44744 89.0174 6.7571C89.0174 6.08381 89.1481 5.4929 89.4095 4.98438C89.6708 4.47585 90.0387 4.07955 90.5132 3.79545C90.9904 3.51136 91.5501 3.36932 92.1921 3.36932C92.624 3.36932 93.0259 3.43892 93.3981 3.57812C93.7731 3.71449 94.0998 3.92045 94.3782 4.19602C94.6595 4.47159 94.8782 4.81818 95.0345 5.2358C95.1907 5.65057 95.2688 6.13636 95.2688 6.69318V7.19176H89.7418V6.06676H93.56C93.56 5.8054 93.5032 5.57386 93.3896 5.37216C93.2759 5.17045 93.1183 5.01278 92.9166 4.89915C92.7177 4.78267 92.4862 4.72443 92.222 4.72443C91.9464 4.72443 91.7021 4.78835 91.489 4.91619C91.2788 5.04119 91.114 5.21023 90.9947 5.4233C90.8754 5.63352 90.8143 5.8679 90.8115 6.12642V7.19602C90.8115 7.51989 90.8711 7.79972 90.9904 8.03551C91.1126 8.27131 91.2845 8.45312 91.5061 8.58097C91.7276 8.70881 91.9904 8.77273 92.2944 8.77273C92.4961 8.77273 92.6808 8.74432 92.8484 8.6875C93.016 8.63068 93.1595 8.54545 93.2788 8.43182C93.3981 8.31818 93.489 8.17898 93.5515 8.0142L95.2305 8.125C95.1453 8.52841 94.9705 8.88068 94.7063 9.18182C94.445 9.48011 94.1069 9.71307 93.6921 9.88068C93.2802 10.0455 92.8043 10.1278 92.2646 10.1278ZM99.2824 12.5909C98.6943 12.5909 98.19 12.5099 97.7696 12.348C97.352 12.1889 97.0196 11.9716 96.7724 11.696C96.5253 11.4205 96.3647 11.1108 96.2909 10.767L97.9699 10.5412C98.021 10.6719 98.102 10.794 98.2128 10.9077C98.3236 11.0213 98.4699 11.1122 98.6517 11.1804C98.8363 11.2514 99.0608 11.2869 99.325 11.2869C99.7199 11.2869 100.045 11.1903 100.301 10.9972C100.559 10.8068 100.689 10.4872 100.689 10.0384V8.84091H100.612C100.532 9.02273 100.413 9.1946 100.254 9.35653C100.095 9.51847 99.8903 9.65057 99.6403 9.75284C99.3903 9.85511 99.092 9.90625 98.7454 9.90625C98.2539 9.90625 97.8065 9.79261 97.4031 9.56534C97.0025 9.33523 96.6829 8.98437 96.4443 8.51278C96.2085 8.03835 96.0906 7.43892 96.0906 6.71449C96.0906 5.97301 96.2113 5.35369 96.4528 4.85653C96.6943 4.35937 97.0153 3.98722 97.4159 3.74006C97.8193 3.4929 98.2611 3.36932 98.7412 3.36932C99.1076 3.36932 99.4145 3.43182 99.6616 3.55682C99.9088 3.67898 100.108 3.83239 100.258 4.01705C100.412 4.19886 100.53 4.37784 100.612 4.55398H100.68V3.45455H102.483V10.0639C102.483 10.6207 102.346 11.0866 102.074 11.4616C101.801 11.8366 101.423 12.1179 100.94 12.3054C100.46 12.4957 99.9074 12.5909 99.2824 12.5909ZM99.3207 8.54261C99.6133 8.54261 99.8605 8.47017 100.062 8.32528C100.267 8.17756 100.423 7.96733 100.531 7.6946C100.642 7.41903 100.697 7.08949 100.697 6.70597C100.697 6.32244 100.643 5.99006 100.535 5.70881C100.427 5.42472 100.271 5.20455 100.066 5.0483C99.8619 4.89205 99.6133 4.81392 99.3207 4.81392C99.0224 4.81392 98.771 4.89489 98.5664 5.05682C98.3619 5.21591 98.2071 5.4375 98.102 5.72159C97.9968 6.00568 97.9443 6.33381 97.9443 6.70597C97.9443 7.08381 97.9968 7.41051 98.102 7.68608C98.2099 7.95881 98.3647 8.17045 98.5664 8.32102C98.771 8.46875 99.0224 8.54261 99.3207 8.54261ZM103.807 10V3.45455H105.623V10H103.807ZM104.719 2.6108C104.449 2.6108 104.218 2.52131 104.025 2.34233C103.834 2.16051 103.739 1.94318 103.739 1.69034C103.739 1.44034 103.834 1.22585 104.025 1.04688C104.218 0.865057 104.449 0.774147 104.719 0.774147C104.989 0.774147 105.219 0.865057 105.41 1.04688C105.603 1.22585 105.699 1.44034 105.699 1.69034C105.699 1.94318 105.603 2.16051 105.41 2.34233C105.219 2.52131 104.989 2.6108 104.719 2.6108ZM112.403 5.32102L110.741 5.4233C110.712 5.28125 110.651 5.15341 110.558 5.03977C110.464 4.9233 110.34 4.83097 110.187 4.76278C110.036 4.69176 109.856 4.65625 109.646 4.65625C109.364 4.65625 109.127 4.71591 108.934 4.83523C108.741 4.9517 108.644 5.10795 108.644 5.30398C108.644 5.46023 108.707 5.59233 108.832 5.70028C108.957 5.80824 109.171 5.89489 109.475 5.96023L110.66 6.19886C111.296 6.32955 111.771 6.53977 112.083 6.82955C112.396 7.11932 112.552 7.5 112.552 7.97159C112.552 8.40057 112.426 8.77699 112.173 9.10085C111.923 9.42472 111.579 9.67756 111.141 9.85938C110.707 10.0384 110.205 10.1278 109.637 10.1278C108.771 10.1278 108.08 9.94744 107.566 9.58665C107.055 9.22301 106.755 8.72869 106.667 8.10369L108.453 8.00994C108.506 8.27415 108.637 8.47585 108.845 8.61506C109.052 8.75142 109.318 8.8196 109.641 8.8196C109.96 8.8196 110.215 8.75852 110.408 8.63636C110.605 8.51136 110.704 8.35085 110.707 8.15483C110.704 7.99006 110.634 7.85511 110.498 7.75C110.362 7.64205 110.151 7.55966 109.867 7.50284L108.734 7.27699C108.095 7.14915 107.619 6.92756 107.306 6.61222C106.997 6.29687 106.842 5.89489 106.842 5.40625C106.842 4.9858 106.955 4.62358 107.183 4.3196C107.413 4.01562 107.735 3.78125 108.15 3.61648C108.568 3.4517 109.056 3.36932 109.616 3.36932C110.443 3.36932 111.093 3.54403 111.568 3.89347C112.045 4.2429 112.323 4.71875 112.403 5.32102ZM117.057 3.45455V4.81818H113.115V3.45455H117.057ZM114.01 1.88636H115.825V7.98864C115.825 8.15625 115.851 8.28693 115.902 8.38068C115.953 8.47159 116.024 8.53551 116.115 8.57244C116.209 8.60937 116.317 8.62784 116.439 8.62784C116.524 8.62784 116.609 8.62074 116.694 8.60653C116.78 8.58949 116.845 8.5767 116.89 8.56818L117.176 9.91903C117.085 9.94744 116.957 9.98011 116.792 10.017C116.628 10.0568 116.427 10.081 116.192 10.0895C115.754 10.1065 115.371 10.0483 115.041 9.91477C114.714 9.78125 114.46 9.57386 114.278 9.29261C114.096 9.01136 114.007 8.65625 114.01 8.22727V1.88636ZM121.032 10.1278C120.358 10.1278 119.779 9.99148 119.293 9.71875C118.81 9.44318 118.438 9.05398 118.177 8.55114C117.915 8.04545 117.785 7.44744 117.785 6.7571C117.785 6.08381 117.915 5.4929 118.177 4.98438C118.438 4.47585 118.806 4.07955 119.28 3.79545C119.758 3.51136 120.317 3.36932 120.959 3.36932C121.391 3.36932 121.793 3.43892 122.165 3.57812C122.54 3.71449 122.867 3.92045 123.145 4.19602C123.427 4.47159 123.645 4.81818 123.802 5.2358C123.958 5.65057 124.036 6.13636 124.036 6.69318V7.19176H118.509V6.06676H122.327C122.327 5.8054 122.27 5.57386 122.157 5.37216C122.043 5.17045 121.885 5.01278 121.684 4.89915C121.485 4.78267 121.253 4.72443 120.989 4.72443C120.714 4.72443 120.469 4.78835 120.256 4.91619C120.046 5.04119 119.881 5.21023 119.762 5.4233C119.643 5.63352 119.581 5.8679 119.579 6.12642V7.19602C119.579 7.51989 119.638 7.79972 119.758 8.03551C119.88 8.27131 120.052 8.45312 120.273 8.58097C120.495 8.70881 120.758 8.77273 121.062 8.77273C121.263 8.77273 121.448 8.74432 121.616 8.6875C121.783 8.63068 121.927 8.54545 122.046 8.43182C122.165 8.31818 122.256 8.17898 122.319 8.0142L123.998 8.125C123.912 8.52841 123.738 8.88068 123.474 9.18182C123.212 9.48011 122.874 9.71307 122.459 9.88068C122.047 10.0455 121.572 10.1278 121.032 10.1278ZM125.101 10V3.45455H126.861V4.59659H126.929C127.048 4.19034 127.248 3.88352 127.53 3.67614C127.811 3.46591 128.135 3.3608 128.501 3.3608C128.592 3.3608 128.69 3.36648 128.795 3.37784C128.9 3.3892 128.993 3.40483 129.072 3.42472V5.03551C128.987 5.00994 128.869 4.98722 128.719 4.96733C128.568 4.94744 128.43 4.9375 128.305 4.9375C128.038 4.9375 127.8 4.99574 127.589 5.11222C127.382 5.22585 127.217 5.38494 127.095 5.58949C126.976 5.79403 126.916 6.02983 126.916 6.29688V10H125.101ZM132.569 10.1278C131.896 10.1278 131.316 9.99148 130.83 9.71875C130.348 9.44318 129.975 9.05398 129.714 8.55114C129.453 8.04545 129.322 7.44744 129.322 6.7571C129.322 6.08381 129.453 5.4929 129.714 4.98438C129.975 4.47585 130.343 4.07955 130.818 3.79545C131.295 3.51136 131.855 3.36932 132.497 3.36932C132.928 3.36932 133.33 3.43892 133.703 3.57812C134.078 3.71449 134.404 3.92045 134.683 4.19602C134.964 4.47159 135.183 4.81818 135.339 5.2358C135.495 5.65057 135.573 6.13636 135.573 6.69318V7.19176H130.046V6.06676H133.865C133.865 5.8054 133.808 5.57386 133.694 5.37216C133.58 5.17045 133.423 5.01278 133.221 4.89915C133.022 4.78267 132.791 4.72443 132.526 4.72443C132.251 4.72443 132.007 4.78835 131.794 4.91619C131.583 5.04119 131.419 5.21023 131.299 5.4233C131.18 5.63352 131.119 5.8679 131.116 6.12642V7.19602C131.116 7.51989 131.176 7.79972 131.295 8.03551C131.417 8.27131 131.589 8.45312 131.811 8.58097C132.032 8.70881 132.295 8.77273 132.599 8.77273C132.801 8.77273 132.985 8.74432 133.153 8.6875C133.321 8.63068 133.464 8.54545 133.583 8.43182C133.703 8.31818 133.794 8.17898 133.856 8.0142L135.535 8.125C135.45 8.52841 135.275 8.88068 135.011 9.18182C134.75 9.48011 134.411 9.71307 133.997 9.88068C133.585 10.0455 133.109 10.1278 132.569 10.1278ZM139.05 10.1065C138.553 10.1065 138.103 9.97869 137.699 9.72301C137.299 9.46449 136.98 9.08523 136.745 8.58523C136.512 8.08239 136.395 7.46591 136.395 6.7358C136.395 5.9858 136.516 5.36222 136.757 4.86506C136.999 4.36506 137.32 3.99148 137.72 3.74432C138.124 3.49432 138.566 3.36932 139.046 3.36932C139.412 3.36932 139.718 3.43182 139.962 3.55682C140.209 3.67898 140.408 3.83239 140.558 4.01705C140.712 4.19886 140.828 4.37784 140.908 4.55398H140.963V1.27273H142.774V10H140.985V8.9517H140.908C140.823 9.13352 140.702 9.31392 140.546 9.4929C140.392 9.66903 140.192 9.81534 139.945 9.93182C139.701 10.0483 139.402 10.1065 139.05 10.1065ZM139.625 8.66193C139.918 8.66193 140.165 8.58239 140.367 8.4233C140.571 8.26136 140.728 8.03551 140.835 7.74574C140.946 7.45597 141.002 7.11648 141.002 6.72727C141.002 6.33807 140.948 6 140.84 5.71307C140.732 5.42614 140.576 5.20455 140.371 5.0483C140.166 4.89205 139.918 4.81392 139.625 4.81392C139.327 4.81392 139.076 4.89489 138.871 5.05682C138.666 5.21875 138.512 5.44318 138.406 5.73011C138.301 6.01705 138.249 6.34943 138.249 6.72727C138.249 7.10795 138.301 7.4446 138.406 7.73722C138.514 8.02699 138.669 8.25426 138.871 8.41903C139.076 8.58097 139.327 8.66193 139.625 8.66193ZM148.62 1.27273V10H146.804V1.27273H148.62ZM152.937 10.1278C152.263 10.1278 151.684 9.99148 151.198 9.71875C150.715 9.44318 150.343 9.05398 150.082 8.55114C149.82 8.04545 149.69 7.44744 149.69 6.7571C149.69 6.08381 149.82 5.4929 150.082 4.98438C150.343 4.47585 150.711 4.07955 151.185 3.79545C151.663 3.51136 152.222 3.36932 152.864 3.36932C153.296 3.36932 153.698 3.43892 154.07 3.57812C154.445 3.71449 154.772 3.92045 155.05 4.19602C155.332 4.47159 155.55 4.81818 155.707 5.2358C155.863 5.65057 155.941 6.13636 155.941 6.69318V7.19176H150.414V6.06676H154.232C154.232 5.8054 154.175 5.57386 154.062 5.37216C153.948 5.17045 153.79 5.01278 153.589 4.89915C153.39 4.78267 153.158 4.72443 152.894 4.72443C152.619 4.72443 152.374 4.78835 152.161 4.91619C151.951 5.04119 151.786 5.21023 151.667 5.4233C151.548 5.63352 151.486 5.8679 151.484 6.12642V7.19602C151.484 7.51989 151.543 7.79972 151.663 8.03551C151.785 8.27131 151.957 8.45312 152.178 8.58097C152.4 8.70881 152.663 8.77273 152.967 8.77273C153.168 8.77273 153.353 8.74432 153.521 8.6875C153.688 8.63068 153.832 8.54545 153.951 8.43182C154.07 8.31818 154.161 8.17898 154.224 8.0142L155.903 8.125C155.817 8.52841 155.643 8.88068 155.379 9.18182C155.117 9.48011 154.779 9.71307 154.364 9.88068C153.952 10.0455 153.477 10.1278 152.937 10.1278ZM158.872 10.1236C158.455 10.1236 158.082 10.0511 157.756 9.90625C157.429 9.75852 157.17 9.54119 156.98 9.25426C156.793 8.96449 156.699 8.60369 156.699 8.17188C156.699 7.80824 156.766 7.50284 156.899 7.25568C157.033 7.00852 157.214 6.80966 157.445 6.65909C157.675 6.50852 157.936 6.39489 158.229 6.31818C158.524 6.24148 158.834 6.1875 159.158 6.15625C159.538 6.11648 159.845 6.07955 160.078 6.04545C160.311 6.00852 160.48 5.95455 160.585 5.88352C160.69 5.8125 160.743 5.70739 160.743 5.56818V5.54261C160.743 5.27273 160.658 5.06392 160.487 4.91619C160.32 4.76847 160.081 4.6946 159.771 4.6946C159.445 4.6946 159.185 4.76705 158.991 4.91193C158.798 5.05398 158.67 5.23295 158.608 5.44886L156.929 5.3125C157.014 4.91477 157.182 4.57102 157.432 4.28125C157.682 3.98864 158.004 3.7642 158.399 3.60795C158.797 3.44886 159.257 3.36932 159.78 3.36932C160.143 3.36932 160.491 3.41193 160.824 3.49716C161.159 3.58239 161.456 3.71449 161.714 3.89347C161.976 4.07244 162.182 4.30256 162.332 4.58381C162.483 4.86222 162.558 5.19602 162.558 5.58523V10H160.837V9.09233H160.786C160.68 9.29688 160.54 9.47727 160.364 9.63352C160.188 9.78693 159.976 9.90767 159.729 9.99574C159.482 10.081 159.196 10.1236 158.872 10.1236ZM159.392 8.87074C159.659 8.87074 159.895 8.81818 160.099 8.71307C160.304 8.60511 160.464 8.46023 160.581 8.27841C160.697 8.09659 160.756 7.89062 160.756 7.66051V6.96591C160.699 7.00284 160.621 7.03693 160.521 7.06818C160.425 7.09659 160.315 7.12358 160.193 7.14915C160.071 7.17187 159.949 7.19318 159.827 7.21307C159.705 7.23011 159.594 7.24574 159.494 7.25994C159.281 7.29119 159.095 7.34091 158.936 7.40909C158.777 7.47727 158.653 7.5696 158.565 7.68608C158.477 7.79972 158.433 7.94176 158.433 8.11222C158.433 8.35938 158.523 8.5483 158.702 8.67898C158.884 8.80682 159.114 8.87074 159.392 8.87074ZM166.259 10.1065C165.761 10.1065 165.311 9.97869 164.908 9.72301C164.507 9.46449 164.189 9.08523 163.953 8.58523C163.72 8.08239 163.604 7.46591 163.604 6.7358C163.604 5.9858 163.724 5.36222 163.966 4.86506C164.207 4.36506 164.528 3.99148 164.929 3.74432C165.332 3.49432 165.774 3.36932 166.254 3.36932C166.621 3.36932 166.926 3.43182 167.17 3.55682C167.418 3.67898 167.617 3.83239 167.767 4.01705C167.92 4.19886 168.037 4.37784 168.117 4.55398H168.172V1.27273H169.983V10H168.193V8.9517H168.117C168.031 9.13352 167.911 9.31392 167.754 9.4929C167.601 9.66903 167.401 9.81534 167.153 9.93182C166.909 10.0483 166.611 10.1065 166.259 10.1065ZM166.834 8.66193C167.126 8.66193 167.374 8.58239 167.575 8.4233C167.78 8.26136 167.936 8.03551 168.044 7.74574C168.155 7.45597 168.21 7.11648 168.21 6.72727C168.21 6.33807 168.156 6 168.048 5.71307C167.94 5.42614 167.784 5.20455 167.58 5.0483C167.375 4.89205 167.126 4.81392 166.834 4.81392C166.536 4.81392 166.284 4.89489 166.08 5.05682C165.875 5.21875 165.72 5.44318 165.615 5.73011C165.51 6.01705 165.457 6.34943 165.457 6.72727C165.457 7.10795 165.51 7.4446 165.615 7.73722C165.723 8.02699 165.878 8.25426 166.08 8.41903C166.284 8.58097 166.536 8.66193 166.834 8.66193ZM176.802 5.32102L175.14 5.4233C175.111 5.28125 175.05 5.15341 174.956 5.03977C174.863 4.9233 174.739 4.83097 174.586 4.76278C174.435 4.69176 174.255 4.65625 174.044 4.65625C173.763 4.65625 173.526 4.71591 173.333 4.83523C173.14 4.9517 173.043 5.10795 173.043 5.30398C173.043 5.46023 173.106 5.59233 173.231 5.70028C173.356 5.80824 173.57 5.89489 173.874 5.96023L175.059 6.19886C175.695 6.32955 176.169 6.53977 176.482 6.82955C176.794 7.11932 176.951 7.5 176.951 7.97159C176.951 8.40057 176.824 8.77699 176.571 9.10085C176.321 9.42472 175.978 9.67756 175.54 9.85938C175.106 10.0384 174.604 10.1278 174.036 10.1278C173.169 10.1278 172.479 9.94744 171.965 9.58665C171.454 9.22301 171.154 8.72869 171.066 8.10369L172.851 8.00994C172.905 8.27415 173.036 8.47585 173.243 8.61506C173.451 8.75142 173.716 8.8196 174.04 8.8196C174.358 8.8196 174.614 8.75852 174.807 8.63636C175.003 8.51136 175.103 8.35085 175.106 8.15483C175.103 7.99006 175.033 7.85511 174.897 7.75C174.76 7.64205 174.55 7.55966 174.266 7.50284L173.133 7.27699C172.493 7.14915 172.017 6.92756 171.705 6.61222C171.395 6.29687 171.24 5.89489 171.24 5.40625C171.24 4.9858 171.354 4.62358 171.581 4.3196C171.811 4.01562 172.134 3.78125 172.549 3.61648C172.966 3.4517 173.455 3.36932 174.015 3.36932C174.841 3.36932 175.492 3.54403 175.966 3.89347C176.444 4.2429 176.722 4.71875 176.802 5.32102Z"
              fill="#23262F"
            />
          </svg>
        }
      >
        <DoubleChart
          name1="count"
          name2="freshman"
          xAxisVertical
          xAxisName="date"
          data={getAllData(watch("source")) || []}
          customTooltip={(p) => {
            const data = p.payload?.[0]?.payload;
            return (
              <CustomTooltip>
                <div className="item">
                  <div className="flex">
                    <div className="color" />
                    <div className="child">
                      <div className="title">New leads</div>
                      <div className="count">{data?.count || 0}</div>
                    </div>
                  </div>
                </div>
                <div className="divider" />
                <div className="item">
                  <div className="flex">
                    <div className="color green" />
                    <div className="child">
                      <div className="title">Registered leads</div>
                      <div className="count">{data?.freshman || 0}</div>
                    </div>
                  </div>
                </div>
              </CustomTooltip>
            );
          }}
        />
      </StatisticsCard>
    </Wrapper>
  );
};

export default NewLeadsToRegistered;
