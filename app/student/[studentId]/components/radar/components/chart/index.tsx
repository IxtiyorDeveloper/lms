import React, { FC } from "react";
import {
  ResponsiveContainer,
  RadarChart,
  PolarGrid,
  PolarAngleAxis,
  PolarRadiusAxis,
  Radar,
} from "recharts";
import { IStudentSkill } from "types/student";
import { bgColors, fontSizes } from "styles/theme";

interface IProps {
  data?: IStudentSkill[];
}

export const svgs = {
  Theory: (
    <svg
      width="36"
      height="36"
      viewBox="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18" cy="18" r="18" fill="#FFC700" />
      <path
        d="M18.7491 24.99C18.7491 24.5758 18.4133 24.24 17.9991 24.24C17.5849 24.24 17.2491 24.5758 17.2491 24.99H18.7491ZM17.2491 25C17.2491 25.4142 17.5849 25.75 17.9991 25.75C18.4133 25.75 18.7491 25.4142 18.7491 25H17.2491ZM21.9991 15H21.2491V15L21.9991 15ZM17.2492 22C17.2492 22.4142 17.5849 22.75 17.9992 22.75C18.4134 22.75 18.7492 22.4142 18.7492 22H17.2492ZM13.3989 13.8131C13.2956 14.2142 13.5371 14.6231 13.9382 14.7263C14.3394 14.8296 14.7483 14.5881 14.8515 14.1869L13.3989 13.8131ZM17.2491 24.99V25H18.7491V24.99H17.2491ZM21.2491 15C21.2491 15.8617 21.0389 16.3068 20.7963 16.6C20.5178 16.9365 20.1496 17.1466 19.6017 17.489C19.0875 17.8103 18.4652 18.2263 17.9949 18.9512C17.5202 19.6832 17.2492 20.6491 17.2492 22H18.7492C18.7492 20.8509 18.9781 20.1918 19.2534 19.7675C19.5332 19.3362 19.9108 19.0647 20.3967 18.761C20.8487 18.4784 21.4805 18.126 21.9519 17.5563C22.4593 16.9432 22.7491 16.1383 22.7491 15L21.2491 15ZM17.9991 11.75C19.794 11.75 21.2491 13.2051 21.2491 15H22.7491C22.7491 12.3767 20.6225 10.25 17.9991 10.25V11.75ZM14.8515 14.1869C15.2123 12.785 16.4858 11.75 17.9991 11.75V10.25C15.7848 10.25 13.9261 11.7645 13.3989 13.8131L14.8515 14.1869Z"
        fill="#090A0A"
      />
    </svg>
  ),
  Exercises: (
    <svg
      width="36"
      height="36"
      viewBox="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18" cy="18" r="18" fill="#FFC700" />
      <path
        d="M22.2 12H13.8C12.81 12 12 12.81 12 13.8V22.2C12 23.19 12.81 24 13.8 24H22.2C23.19 24 24 23.19 24 22.2V13.8C24 12.81 23.19 12 22.2 12ZM21.6 15.6H22.8V17.4H21.6V15.6ZM20.4 17.4H15.6V13.2H20.4V17.4ZM14.4 17.4H13.2V15.6H14.4V17.4ZM13.2 18.6H14.4V20.4H13.2V18.6ZM15.6 18.6H20.4V22.8H15.6V18.6ZM21.6 18.6H22.8V20.4H21.6V18.6ZM22.8 13.8V14.4H21.6V13.2H22.2C22.53 13.2 22.8 13.47 22.8 13.8ZM13.8 13.2H14.4V14.4H13.2V13.8C13.2 13.47 13.47 13.2 13.8 13.2ZM13.2 22.2V21.6H14.4V22.8H13.8C13.47 22.8 13.2 22.53 13.2 22.2ZM22.2 22.8H21.6V21.6H22.8V22.2C22.8 22.53 22.53 22.8 22.2 22.8Z"
        fill="black"
      />
    </svg>
  ),
  Vocabulary: (
    <svg
      width="36"
      height="36"
      viewBox="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18" cy="18" r="18" fill="#FFC700" />
      <path
        d="M12 12V21H15V24H24V15H21V12H12ZM13 13H20V15.2812L15.2812 20H13V13ZM15.5 14V14.5H14V15.5H16.4688C16.4043 16.0742 16.2285 16.5273 15.9375 16.8438C15.7656 16.7871 15.6113 16.7168 15.4844 16.6406C15.1328 16.4316 15 16.209 15 16H14C14 16.5957 14.3672 17.0918 14.8594 17.4219C14.6133 17.4746 14.3281 17.5 14 17.5V18.5C14.8867 18.5 15.625 18.2969 16.1875 17.9219C16.4492 17.9668 16.7148 18 17 18V17.0625C17.2715 16.6074 17.416 16.0762 17.4688 15.5H18V14.5H16.5V14H15.5ZM20.7188 16H23V23H16V20.7188L20.7188 16ZM20 16.9219L19.5312 18.3438L18.5312 21.3438L18.5 21.4219V22H19.5V21.5625L19.5156 21.5H20.4844L20.5 21.5625V22H21.5V21.4219L21.4688 21.3438L20.4688 18.3438L20 16.9219ZM20 20.0625L20.1406 20.5H19.8594L20 20.0625Z"
        fill="#090A0A"
      />
    </svg>
  ),
  Reading: (
    <svg
      width="36"
      height="36"
      viewBox="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18" cy="18" r="18" fill="#FFC700" />
      <path
        d="M18 23.4932L24 22.6362V12.6562L18.212 13.4832C18.0714 13.5033 17.9286 13.5033 17.788 13.4832L12 12.6562V22.6362L18 23.4932ZM12.141 11.6662L17.929 12.4932C17.9761 12.5 18.0239 12.5 18.071 12.4932L23.859 11.6662C24.0008 11.646 24.1453 11.6565 24.2827 11.697C24.4201 11.7375 24.5472 11.8071 24.6554 11.9009C24.7635 11.9948 24.8503 12.1108 24.9098 12.2411C24.9692 12.3714 25 12.513 25 12.6562V22.6362C25 22.877 24.9131 23.1097 24.7553 23.2916C24.5975 23.4735 24.3794 23.5923 24.141 23.6262L18.071 24.4932C18.0239 24.5 17.9761 24.5 17.929 24.4932L11.859 23.6262C11.6206 23.5923 11.4025 23.4735 11.2447 23.2916C11.0869 23.1097 11 22.877 11 22.6362V12.6562C11 12.513 11.0308 12.3714 11.0902 12.2411C11.1497 12.1108 11.2365 11.9948 11.3446 11.9009C11.4528 11.8071 11.5799 11.7375 11.7173 11.697C11.8547 11.6565 11.9992 11.646 12.141 11.6662Z"
        fill="black"
      />
      <path d="M17.5 13H18.5V24H17.5V13Z" fill="black" />
    </svg>
  ),
  Grammar: (
    <svg
      width="37"
      height="36"
      viewBox="0 0 37 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18.5" cy="18" r="18" fill="#FFC700" />
      <g clipPath="url(#clip0_309_23487)">
        <path d="M22.5 19.5H19.5V20.5H22.5V19.5Z" fill="black" />
        <path d="M25.5 17.5H19.5V18.5H25.5V17.5Z" fill="black" />
        <path d="M25.5 15.5H19.5V16.5H25.5V15.5Z" fill="black" />
        <path
          d="M17.5 20.5V19.5H15V18.5H14V19.5H11.5V20.5H15.6074C15.4236 21.2504 15.0409 21.9374 14.4994 22.4886C14.2157 22.1925 13.9724 21.8601 13.7761 21.5H12.6667C12.9209 22.1102 13.2844 22.6688 13.7392 23.1483C13.2032 23.5301 12.6182 23.8379 12 24.0635L12.3511 25C13.1204 24.7198 13.8435 24.3261 14.4964 23.8319C15.1518 24.3263 15.8773 24.72 16.649 25L17 24.0635C16.3821 23.8383 15.7973 23.5311 15.2614 23.15C15.9671 22.4202 16.4418 21.4984 16.6258 20.5H17.5Z"
          fill="black"
        />
        <path
          d="M16.0833 16.5H17.1665L14.875 11H13.7916L11.5 16.5H12.5832L13 15.5H15.6667L16.0833 16.5ZM13.4165 14.5L14.3333 12.3L15.25 14.5H13.4165Z"
          fill="black"
        />
      </g>
      <defs>
        <clipPath id="clip0_309_23487">
          <rect
            width="16"
            height="16"
            fill="white"
            transform="translate(10.5 10)"
          />
        </clipPath>
      </defs>
    </svg>
  ),
  Writing: (
    <svg
      width="36"
      height="36"
      viewBox="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18" cy="18" r="18" fill="#FFC700" />
      <path
        d="M25.4148 15.7483C24.9429 15.2764 24.1849 15.2607 23.6938 15.7011V10.3561C23.6938 10.1594 23.5344 10 23.3377 10H10.5749C10.3782 10 10.2188 10.1594 10.2188 10.3561V25.6439C10.2188 25.8406 10.3782 26 10.5749 26H23.3377C23.5344 26 23.6938 25.8406 23.6938 25.6439V19.2402L25.4089 17.5251C25.4099 17.5241 25.4106 17.5231 25.4115 17.5222C25.4126 17.5212 25.4138 17.5203 25.4148 17.5192C25.9031 17.0309 25.9031 16.2365 25.4148 15.7483ZM10.931 25.2877V10.7123H22.9815V16.4105L21.6192 17.7729C21.5654 17.7403 21.5025 17.7212 21.435 17.7212H12.4443C12.2477 17.7212 12.0882 17.8806 12.0882 18.0773C12.0882 18.2741 12.2477 18.4335 12.4443 18.4335H20.9586L20.135 19.2571H12.4443C12.2477 19.2571 12.0882 19.4165 12.0882 19.6132C12.0882 19.8099 12.2477 19.9693 12.4443 19.9693H19.4227L18.5991 20.7929H12.4443C12.2477 20.7929 12.0882 20.9523 12.0882 21.1491C12.0882 21.3458 12.2477 21.5052 12.4443 21.5052H17.8869L17.2317 22.1604C17.2221 22.17 17.2133 22.1801 17.205 22.1905C17.2029 22.1933 17.2009 22.1962 17.1988 22.199C17.1927 22.2071 17.1869 22.2155 17.1815 22.224C17.1796 22.2272 17.1777 22.2305 17.1758 22.2338C17.1706 22.2427 17.1659 22.2517 17.1615 22.2609C17.1606 22.2628 17.1595 22.2646 17.1586 22.2665L17.1003 22.3964C17.0418 22.354 16.97 22.3288 16.8922 22.3288H12.4443C12.2477 22.3288 12.0882 22.4882 12.0882 22.6849C12.0882 22.8816 12.2477 23.041 12.4443 23.041H16.8114L16.3528 24.0638C16.3446 24.0822 16.3383 24.101 16.3334 24.12C16.2403 24.318 16.2749 24.5615 16.4381 24.7247C16.5389 24.8256 16.6729 24.8811 16.8156 24.8811C16.8965 24.8811 16.9745 24.8626 17.0454 24.8287C17.0635 24.8238 17.0815 24.8179 17.099 24.8101L18.8965 24.0044C18.8983 24.0035 18.9 24.0024 18.9018 24.0015C18.9112 23.9972 18.9205 23.9924 18.9295 23.987C18.9326 23.9852 18.9358 23.9834 18.9388 23.9815C18.9477 23.976 18.9563 23.97 18.9647 23.9637C18.9672 23.9618 18.9698 23.9601 18.9723 23.9581C18.9828 23.9498 18.993 23.9409 19.0027 23.9312L22.9815 19.9524V25.2877H10.931ZM18.1335 23.5659L17.2043 23.9824C17.2004 23.9783 17.197 23.9739 17.193 23.9699C17.189 23.9659 17.1847 23.9625 17.1806 23.9586L17.5972 23.0295L18.1335 23.5659ZM18.7508 23.1758L17.9872 22.4122L23.8899 16.5096L24.6535 17.2732L18.7508 23.1758ZM25.0669 16.6793L24.4839 16.0962C24.6369 16.0834 24.7943 16.1351 24.9112 16.2519C25.0281 16.3688 25.0797 16.5263 25.0669 16.6793Z"
        fill="black"
      />
    </svg>
  ),
  Pronunciation: (
    <svg
      width="36"
      height="36"
      viewBox="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18" cy="18" r="18" fill="#FFC700" />
      <path
        d="M16.8494 23.4068H11.4076V20.1828C10.5099 19.3551 10 18.198 10 16.9685C10 14.5562 11.9626 12.5938 14.3747 12.5938C16.3441 12.5938 18.08 13.9203 18.5959 15.8198L18.612 15.8783L18.6446 16.5956L19.9649 18.447L18.8043 19.29V19.9347C18.8043 20.7111 18.1726 21.343 17.3956 21.343H16.8496L16.8494 23.4068ZM12.5052 22.3091H15.7517V20.2457H17.3955C17.5671 20.2457 17.7065 20.1061 17.7065 19.9349V18.7311L18.4393 18.1988L17.5623 16.9694L17.5208 16.0517C17.1157 14.6592 15.8302 13.6918 14.3745 13.6918C12.5676 13.6918 11.0975 15.1619 11.0975 16.9688C11.0975 17.9567 11.5369 18.882 12.3033 19.5075L12.505 19.6722L12.5052 22.3091Z"
        fill="black"
      />
      <path
        d="M21.1864 20.4265L20.4103 19.6505C20.9054 19.1553 20.9054 18.3496 20.4102 17.8542L21.1866 17.0781C22.1095 18.0013 22.1095 19.5036 21.1864 20.4265Z"
        fill="black"
      />
      <path
        d="M22.6667 21.5921L21.8906 20.8161C23.0302 19.6765 23.0302 17.822 21.8906 16.6823L22.6667 15.9062C24.2339 17.4739 24.2339 20.0247 22.6667 21.5921Z"
        fill="black"
      />
      <path
        d="M24.3702 22.6898L23.5938 21.9138C25.3374 20.1698 25.3374 17.3324 23.5941 15.5885L24.3702 14.8125C26.5421 16.9838 26.5421 20.5178 24.3702 22.6898Z"
        fill="black"
      />
    </svg>
  ),
  Listening: (
    <svg
      width="37"
      height="36"
      viewBox="0 0 37 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="18.5" cy="18" r="18" fill="#FFC700" />
      <path
        d="M18.9969 10.7891C14.5875 10.8095 11 14.4135 11 18.8228C11 20.1618 11.3357 21.4819 11.9706 22.6516V20.5276C11.9706 20.1362 12.1099 19.7731 12.3541 19.4616C12.3339 19.2497 12.3235 19.0365 12.3235 18.8228C12.3235 15.1398 15.3199 12.1297 18.9969 12.1126C22.68 12.1297 25.6764 15.1398 25.6764 18.8228C25.6764 19.0595 25.6632 19.2954 25.6385 19.5298C25.8507 19.8256 25.9706 20.1645 25.9706 20.5276V22.7593C26.6439 21.5633 27 20.2029 27 18.8228C27 14.4135 23.4125 10.8095 18.9969 10.7891Z"
        fill="black"
      />
      <path
        d="M12.4659 20.185C12.4321 20.2957 12.4141 20.4104 12.4141 20.528V22.5751V23.528C12.4141 24.4538 13.5167 25.2045 14.8771 25.2045H15.9141V18.8516H14.8771C13.6895 18.8516 12.6985 19.4236 12.4659 20.185Z"
        fill="black"
      />
      <path
        d="M25.5313 23.528V22.5418V20.528C25.5313 20.4558 25.5238 20.3846 25.5107 20.3148C25.3567 19.4896 24.3223 18.8516 23.0683 18.8516H22.0312V25.2044H23.0683C24.4286 25.2044 25.5313 24.4538 25.5313 23.528Z"
        fill="black"
      />
    </svg>
  ),
};

const indexes = {
  0: [-18, -100, -14],
  1: [10, -32, -4],
  2: [10, -18, -4],
  3: [-18, 10, -3],
  4: [-50, -10, -6],
  5: [-55, -20, -26],
};

const LineCharts: FC<IProps> = ({ data: chartData }) => {
  const data = chartData?.map((e) => {
    return {
      subject: e.name,
      A: e.total > 0 ? ((e.passed * 100) / e.total).toFixed(0) : 0,
    };
  });

  return (
    <div className="chart">
      <ResponsiveContainer width="100%" height="100%">
        <RadarChart cx="50%" cy="50%" outerRadius="65%" data={data}>
          <PolarGrid repeatCount={20} maskContentUnits={20} />
          <PolarAngleAxis
            dataKey="subject"
            tick={({ x, y, payload, index }) => {
              const xy = indexes[index as keyof typeof indexes];
              const percent = data?.find((e) => e.subject == payload.value)?.A;
              return (
                <g
                  style={{ textAlign: "center", background: "red" }}
                  transform={`translate(${x + xy[0]},${y + xy[1]})`}
                  dy={50}
                >
                  {svgs[payload.value as keyof typeof svgs]}
                  <text
                    transform={`translate(${xy[2]},58)`}
                    style={{
                      fontSize: fontSizes.f12,
                      fontWeight: "700",
                    }}
                  >
                    {payload.value}
                  </text>
                  <text
                    color="red"
                    style={{
                      color: "red",
                      fontSize: "12px",
                      lineHeight: "1.33",
                      background: "red",
                    }}
                    transform={`translate(${(percent + "").length + 2},80)`}
                  >
                    {percent}%
                  </text>
                </g>
              );
            }}
          />
          <PolarRadiusAxis
            angle={90}
            tick={({ x, y, payload }) => {
              return (
                <g transform={`translate(${x - 5},${y})`}>
                  <text
                    style={{
                      color: "#474747",
                      fontSize: fontSizes.f8,
                    }}
                  >
                    {payload.value}%
                  </text>
                </g>
              );
            }}
          />
          <Radar
            name="Mike"
            dataKey="A"
            stroke={bgColors.primary}
            fill="rgba(255, 199, 0, 0.50)"
            fillOpacity={0.6}
            style={{ margin: "10px" }}
          />
        </RadarChart>
      </ResponsiveContainer>
    </div>
  );
};

export default LineCharts;
